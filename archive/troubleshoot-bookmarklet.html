<!DOCTYPE html>
<html>
<head>
    <title>TPL Bookmarklet Troubleshooting</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        .test-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #007bff; }
        .bookmarklet-link { 
            background: #007bff; color: white; padding: 10px 20px; text-decoration: none; 
            border-radius: 4px; display: inline-block; margin: 10px 5px; cursor: move;
        }
        .code-block { 
            background: #1f2937; color: #f9fafb; padding: 15px; border-radius: 5px; 
            font-family: monospace; font-size: 12px; overflow-x: auto; margin: 10px 0;
        }
        .warning { background: #fff3cd; padding: 15px; border-radius: 5px; border-left: 4px solid #ffc107; margin: 15px 0; }
        .success { background: #d1edff; padding: 15px; border-radius: 5px; border-left: 4px solid #0066cc; margin: 15px 0; }
    </style>
</head>
<body>
    <h1>üîß TPL Bookmarklet Troubleshooting</h1>
    
    <div class="warning">
        <h3>‚ö†Ô∏è Common Issues & Solutions</h3>
        <ul>
            <li><strong>Corporate Browser:</strong> Some browsers block javascript: URLs for security</li>
            <li><strong>Wrong Page:</strong> Bookmarklet only works on nytimes.com pages</li>
            <li><strong>Console Errors:</strong> Check browser developer tools for error messages</li>
            <li><strong>Popup Blockers:</strong> May prevent the alert from showing</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üß™ Test 1: Simple Alert Bookmarklet</h2>
        <p>First, let's test if bookmarklets work at all in your browser:</p>
        <a href="javascript:alert('Bookmarklets work in your browser!');" class="bookmarklet-link">üîî Test Alert</a>
        <p><strong>Instructions:</strong> Drag this link to your bookmarks bar and click it. You should see an alert.</p>
    </div>

    <div class="test-section">
        <h2>üß™ Test 2: Simple TPL Detector</h2>
        <p>This simplified version just counts TPL elements:</p>
        <a href="javascript:(function(){var elements=document.querySelectorAll('[class*=tpl]');alert('Found '+elements.length+' elements with TPL classes on this page');})();" class="bookmarklet-link">üîç Simple TPL Counter</a>
        <p><strong>Test on:</strong> Any nytimes.com page</p>
    </div>

    <div class="test-section">
        <h2>üß™ Test 3: Console Method</h2>
        <p>If bookmarklets don't work, try pasting this directly into the browser console:</p>
        <div class="code-block">
// Simple TPL detector for console
(function(){
    var elements = document.querySelectorAll('[class*="tpl"]');
    console.log('Found ' + elements.length + ' TPL elements:', elements);
    
    // Add simple highlighting
    elements.forEach(function(el, i) {
        el.style.outline = '2px solid red';
        el.title = 'TPL Element #' + (i+1) + ': ' + el.className;
    });
    
    alert('Found ' + elements.length + ' TPL elements. Check console for details.');
})();
        </div>
        <button onclick="copyConsoleCode()" style="padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">üìã Copy Console Code</button>
    </div>

    <div class="success">
        <h2>üìã Step-by-Step Troubleshooting</h2>
        <ol>
            <li><strong>Test Basic Bookmarklet:</strong> Try "Test Alert" above first</li>
            <li><strong>Check Browser Console:</strong> Press F12 ‚Üí Console tab ‚Üí look for errors</li>
            <li><strong>Verify Page:</strong> Make sure you're on a nytimes.com page</li>
            <li><strong>Try Console Method:</strong> Copy the console code above and paste it</li>
            <li><strong>Check Popup Blockers:</strong> Disable popup blockers temporarily</li>
            <li><strong>Try Different Browser:</strong> Test in Chrome, Firefox, or Safari</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üîß Manual Installation Method</h2>
        <p>If dragging doesn't work, manually create the bookmark:</p>
        <ol>
            <li>Right-click your bookmarks bar ‚Üí "Add bookmark" or "New bookmark"</li>
            <li>Name: <code>TPL Simple Test</code></li>
            <li>URL: Copy and paste this entire line:</li>
        </ol>
        <textarea readonly onclick="this.select()" style="width: 100%; height: 80px; font-family: monospace; font-size: 11px; padding: 8px;">javascript:(function(){var elements=document.querySelectorAll('[class*="tpl"]');if(elements.length===0){alert('No TPL elements found on this page. Make sure you are on nytimes.com');}else{elements.forEach(function(el,i){el.style.outline='3px solid orange';el.style.backgroundColor='rgba(255,165,0,0.2)';});alert('Found '+elements.length+' TPL elements! They are now highlighted in orange.');}})();</textarea>
    </div>

    <div class="warning">
        <h3>üö® If Nothing Works</h3>
        <p>Your browser or corporate policy might be blocking JavaScript bookmarklets. Try:</p>
        <ul>
            <li><strong>Different Browser:</strong> Chrome Canary, Firefox, or Safari</li>
            <li><strong>Personal Device:</strong> Test on your personal computer/phone</li>
            <li><strong>Console Only:</strong> Use the console method instead of bookmarklets</li>
            <li><strong>Browser Extension:</strong> If you can install extensions, we can try that approach</li>
        </ul>
    </div>

    <script>
        function copyConsoleCode() {
            const code = `(function(){
    var elements = document.querySelectorAll('[class*="tpl"]');
    console.log('Found ' + elements.length + ' TPL elements:', elements);
    
    // Add simple highlighting
    elements.forEach(function(el, i) {
        el.style.outline = '2px solid red';
        el.title = 'TPL Element #' + (i+1) + ': ' + el.className;
    });
    
    alert('Found ' + elements.length + ' TPL elements. Check console for details.');
})();`;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(code).then(() => {
                    alert('Console code copied! Paste it in browser console (F12 ‚Üí Console tab)');
                });
            } else {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = code;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('Console code copied! Paste it in browser console (F12 ‚Üí Console tab)');
            }
        }
    </script>
</body>
</html>
